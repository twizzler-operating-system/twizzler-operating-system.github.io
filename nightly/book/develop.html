<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Developing on Twizzler - The Twizzler Operating System</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="BUILD.html">Building Twizzler</a></li><li class="chapter-item expanded affix "><a href="develop.html" class="active">Developing on Twizzler</a></li><li class="chapter-item expanded affix "><a href="Debug.html">Debugging Twizzler</a></li><li class="chapter-item expanded affix "><li class="part-title">Fundamentals</li><li class="chapter-item expanded "><a href="Object.html"><strong aria-hidden="true">1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="Lifetime.html"><strong aria-hidden="true">2.</strong> Object Lifetime</a></li><li class="chapter-item expanded "><a href="Pointer.html"><strong aria-hidden="true">3.</strong> Pointers</a></li><li class="chapter-item expanded "><a href="Permissions.html"><strong aria-hidden="true">4.</strong> Permissions</a></li><li class="chapter-item expanded "><a href="ReferenceRuntime.html"><strong aria-hidden="true">5.</strong> Reference Runtime</a></li><li class="chapter-item expanded affix "><li class="part-title">Primitives</li><li class="chapter-item expanded "><a href="Views.html"><strong aria-hidden="true">6.</strong> Views</a></li><li class="chapter-item expanded "><a href="KSO.html"><strong aria-hidden="true">7.</strong> Kernel State Objects</a></li><li class="chapter-item expanded "><a href="Extensions.html"><strong aria-hidden="true">8.</strong> Extensions</a></li><li class="chapter-item expanded "><a href="Gates.html"><strong aria-hidden="true">9.</strong> Gates</a></li><li class="chapter-item expanded affix "><li class="part-title">Driver Development</li><li class="chapter-item expanded "><a href="DMA.html"><strong aria-hidden="true">10.</strong> DMA</a></li><li class="chapter-item expanded affix "><li class="part-title">Advanced Features</li><li class="chapter-item expanded "><a href="CargoMetadata.html"><strong aria-hidden="true">11.</strong> Twizzler Build System Crate Metadata</a></li><li class="chapter-item expanded affix "><li class="part-title">Other</li><li class="chapter-item expanded "><a href="AssortedNotes.html"><strong aria-hidden="true">12.</strong> Assorted Notes</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Twizzler Operating System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="developing-for-twizzler"><a class="header" href="#developing-for-twizzler">Developing for Twizzler</a></h1>
<p>The Twizzler project welcomes people to contribute to this open source
operating system.  We follow a branch and pull-request process.  For
those without write access to the repo you will first have to fork the
Twizzler repo, for those with write access it's easier to work within
the main repo in your own branches.</p>
<h2 id="writing-your-first-twizzler-program"><a class="header" href="#writing-your-first-twizzler-program">Writing your First Twizzler Program</a></h2>
<p>Twizzler makes heavy use of Rust's Cargo system of crates in order to manage both kernel and user space programs.  To create a new program that
runs on the Twizzler operating system you can follow these steps:</p>
<ol>
<li>Change directories into the bin directory:</li>
</ol>
<p><code>cd twizzler/src/bin</code></p>
<ol start="2">
<li>
<p>Create a new program, named <code>hello</code>.  The <code>Cargo</code> command will actually create the canonical <code>Hello world</code> program for you.
<code>cargo new --bin hello</code></p>
</li>
<li>
<p>Change directory back to the project root, and edit the Cargo.toml file in the root directory to add the program to the Twizzler build system.</p>
</li>
</ol>
<p>The following diff shows the two lines you need to add:</p>
<pre><code class="language-diff">diff --git a/Cargo.toml b/Cargo.toml
index 338455b..cb38fb5 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -7,6 +7,7 @@ members = [
     &quot;src/bin/devmgr&quot;,
     &quot;src/bin/netmgr&quot;,
     &quot;src/bin/nettest&quot;,
+    &quot;src/bin/hello&quot;,
     &quot;src/kernel&quot;,
     &quot;src/lib/twizzler-queue-raw&quot;,
     &quot;src/lib/twizzler-queue&quot;,
@@ -21,10 +22,11 @@ initrd = [
     &quot;crate:devmgr&quot;,
     &quot;crate:netmgr&quot;,
     &quot;crate:nettest&quot;,
+    &quot;crate:hello&quot;,
 ]
</code></pre>
<ol start="4">
<li>Rebuild the system and start QEMU</li>
</ol>
<p><code>cargo start-qemu</code></p>
<ol start="5">
<li>From within Twizzler run your new program</li>
</ol>
<pre><code>run hello
got: &lt;run hello&gt;
&gt; Hello, world!
</code></pre>
<ol start="6">
<li>Exit the simulator with <code>Ctrl-a x</code></li>
</ol>
<h2 id="picking-an-issue-to-work"><a class="header" href="#picking-an-issue-to-work">Picking an Issue to Work</a></h2>
<p>Before reading this document make sure that you have worked through the build process, which is documented
<a href="https://github.com/twizzler-operating-system/twizzler/doc/src/BUILD.md">here</a>.</p>
<p>After reading this document, if you would like to work on an open issue,
you can take a look at a
<a href="https://github.com/twizzler-operating-system/twizzler/issues">list of issues</a>.
For newer contributors, easier issues are tagged
<a href="https://github.com/twizzler-operating-system/twizzler/labels/good%20first%20issue">good first issue</a>
and are a good place to dive in.</p>
<h2 id="branch-naming"><a class="header" href="#branch-naming">Branch Naming</a></h2>
<p>Branch names should be short and descriptive, containing the user's
github or other short name, following by a dash and then a feature
name, e.g. gnn-icmp.  Names must not violate the Twizzler project's
Code of Conduct.  Please keep it classy.</p>
<h2 id="submitting-a-pull-request"><a class="header" href="#submitting-a-pull-request">Submitting a Pull Request</a></h2>
<p>All pull requests should be against the 'main' branch.  From time to
time there may be special exceptions but these must be coordinated
with the project owners, listed on the main github page.</p>
<h2 id="example-workflow"><a class="header" href="#example-workflow">Example Workflow</a></h2>
<p>In order to create this set of documentation the following steps were
carried out.</p>
<pre><code>&gt; git clone git@github.com:twizzler-operating-system/twizzler.git
</code></pre>
<p>Create and edit file in doc/src/develop.md</p>
<pre><code>&gt; git branch -b gnn-docs
&gt; git add doc/src/develop.md
&gt; git commit
&gt; git push --set-upstream origin gnn-docs
</code></pre>
<p>The pull request was then submitted from the github page for the
Twizzer project.</p>
<p>Two reviewers were added at the time the PR was committed.</p>
<h1 id="coding-standards"><a class="header" href="#coding-standards">Coding Standards</a></h1>
<p>Code submitted to Twizzler must follow these guidelines:</p>
<ul>
<li>Follow the Rust style guide. This is just the default style for all rust code established by <code>rustfmt</code>, explained at <a href="https://github.com/rust-lang/rustfmt#readme">this GitHub repository</a>.</li>
<li>Be well documented. Please add documentation to explain your code. For more information on this, see below.</li>
<li>For unsafe code, have special safety documentation to explain why the code must be unsafe, and extra scrutiny on that code to ensure its correctness.</li>
<li>Pass <a href="https://github.com/rust-lang/rust-clippy#readme">clippy</a>, the rust linter. It is useful for finding common mistakes and improving code.</li>
</ul>
<h2 id="documentation"><a class="header" href="#documentation">Documentation</a></h2>
<p>If you want to document code instead of writing it, thank you! Rust has a built-in documentation tool <code>rustdoc</code> which makes compiling documentation easier, and writing it directly in the code more natural. <a href="https://doc.rust-lang.org/cargo/index.html">Documentation explanation</a>. Contributions can be made through pull requests, just like for code, explained above.</p>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<p>Twizzler supports an integrated testing system, where kernel test harnesses and userspace test
programs for libraries and binaries are run on start-up. You can run Twizzler in test mode by adding
the <code>--tests</code> argument to your cargo run commands.</p>
<p>When developing for Twizzler, you should write tests that cover code you wrote. This includes both
userspace and kernelspace code. Note that writing tests for the kernel is slightly different, in
that a test-case failing causes the whole system to stop, and you need to use the <code>#[kernel_test]</code>
attribute from the <code>twizzler-kernel-macros</code> crate instead of <code>#[test]</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="BUILD.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="Debug.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="BUILD.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="Debug.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
